# WRD-Server Configuration File
# Wayland Remote Desktop Server using RDP protocol

[server]
# Address and port to listen on
listen_addr = "0.0.0.0:3389"

# Maximum number of concurrent connections
max_connections = 10

# Session timeout in seconds (0 = no timeout)
session_timeout = 0

# Use XDG Desktop Portals for screen capture
use_portals = true

[security]
# Path to TLS certificate file
cert_path = "certs/test-cert.pem"

# Path to TLS private key file
key_path = "certs/test-key.pem"

# Enable Network Level Authentication
enable_nla = true

# Authentication method: "pam" or "none"
auth_method = "pam"

# Require TLS 1.3 or higher
require_tls_13 = true

[video]
# Video encoder: "vaapi", "openh264", or "auto"
encoder = "auto"

# VAAPI device path
vaapi_device = "/dev/dri/renderD128"

# Target frames per second
target_fps = 30

# Video bitrate in kbps
bitrate = 4000

# Enable damage tracking for efficient updates
damage_tracking = true

# Cursor rendering mode: "embedded", "metadata", or "hidden"
cursor_mode = "metadata"

[input]
# Use libei for input injection
use_libei = true

# Keyboard layout: "auto" or XKB layout name
keyboard_layout = "auto"

# Enable touch input support
enable_touch = false

[clipboard]
# Enable clipboard synchronization
enabled = true

# Maximum clipboard data size in bytes (10 MB)
max_size = 10485760

# Allowed MIME types (empty = all types allowed)
allowed_types = []

[multimon]
# Enable multi-monitor support
enabled = true

# Maximum number of monitors to support
max_monitors = 4

[performance]
# Number of encoder threads (0 = auto)
encoder_threads = 0

# Number of network threads (0 = auto)
network_threads = 0

# Size of the frame buffer pool
buffer_pool_size = 16

# Enable zero-copy operations where possible
zero_copy = true

[logging]
# Log level: "trace", "debug", "info", "warn", or "error"
level = "info"

# Directory for log files (commented out = console only)
# log_dir = "/var/log/wrd-server"

# Enable metrics collection
metrics = true
